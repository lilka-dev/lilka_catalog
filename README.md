# Lilka Repository Static Site

A static website for browsing Lilka apps and mods with automatic deployment to GitHub Pages.

## Features

- **Dual Browse Mode**: Switch between Apps and Mods tabs
- **Page Navigation**: Direct page number navigation with smart pagination
- **4-Column Grid Layout**: Displays 4 apps per row (responsive on smaller screens)
- **Detailed Modal Views**: Click any item to see full details including:
  - Description and changelog (markdown formatted)
  - Author information
  - Download links for execution files (apps) or mod files (mods)
  - Source repository links
  - Icons and screenshots
- **Responsive Design**: Works on desktop and mobile devices
- **Dark Theme**: Modern dark UI with smooth animations
- **Auto-Deploy**: GitHub Actions workflow for automatic builds and deployment

## File Structure

```
site/
├── index.html          # Main HTML page
├── styles.css          # All styling
├── script.js           # JavaScript application logic
└── README.md           # This file

build/                  # Generated by build script
├── index.html          # Copied from site/
├── styles.css          # Copied from site/
├── script.js           # Copied from site/
├── apps/
│   ├── index_0.json    # Apps pagination index
│   └── [app-name]/
│       ├── index.json  # App manifest
│       └── static/     # App assets (icons, files)
└── mods/
    ├── index_0.json    # Mods pagination index
    └── [mod-name]/
        ├── index.json  # Mod manifest
        └── static/     # Mod assets (icons, files)

scripts/
└── build.site.sh       # Build script to compile everything
```

## How It Works

1. **Index Files**: The site loads `apps/index_0.json` or `mods/index_0.json` based on the selected tab
2. **Pagination**: Each index file contains:
   - Current page number
   - Total pages available
   - List of manifest names for that page
3. **Manifest Loading**: For each manifest name, the site fetches `[type]/[name]/index.json`
4. **Static Assets**: Icons and files are loaded from `[type]/[name]/static/`

## Usage

### Local Development

Simply open `index.html` in a web browser. However, due to CORS restrictions, you'll need a local server:

```bash
# Using Python 3
cd build
python3 -m http.server 8000
```

Then visit: `http://localhost:8000`

### GitHub Pages Deployment (Automatic)

The repository includes a GitHub Actions workflow that automatically builds and deploys to GitHub Pages on every push to the `main` branch.

**Setup Steps:**

1. **Enable GitHub Pages:**
   - Go to your repository settings
   - Navigate to "Pages" section
   - Under "Build and deployment", set:
     - **Source**: GitHub Actions
   
2. **Push to main branch:**
   ```bash
   git add .
   git commit -m "Setup GitHub Pages deployment"
   git push origin main
   ```

3. **Wait for deployment:**
   - Go to the "Actions" tab in your repository
   - Watch the "Build and Deploy to GitHub Pages" workflow run
   - Once complete, your site will be live at: `https://<username>.github.io/<repository-name>/`

**What the workflow does:**
- Installs Python and dependencies (PyYAML, requests)
- Runs `build.py --build` to generate JSON files from manifests
- Copies static site files (HTML, CSS, JS) to build directory
- Deploys the `build/` folder to GitHub Pages

**Manual Deployment:**
You can also deploy manually by uploading the `build/` directory to:
- Netlify
- Vercel
- AWS S3 + CloudFront
- Any web server

## Building

Run the build script to compile the complete static site:

```bash
./scripts/build.site.sh
```

This will:
1. Process all manifests in `apps/` and `mods/` directories (via `build.py`)
2. Generate JSON index files with proper pagination
3. Download/copy static assets (icons, execution files, mod files)
4. Copy site files (HTML, CSS, JS) to `build/` directory
5. Verify all required files are present

### Manual Build

You can also build components separately:

```bash
# Build only JSON files from manifests
python3 build.py --build

# Then manually copy site files
cp site/{index.html,styles.css,script.js} build/
```

## JSON Structure

### Index File (`index_0.json`)
```json
{
  "page": 0,
  "total_pages": 1,
  "manifests": [
    "app-name",
    "another-app"
  ]
}
```

### Manifest File (`[name]/index.json`)
```json
{
  "name": "App Name",
  "description": "Full description...",
  "short_description": "Brief description",
  "changelog": "Version history...",
  "author": "@username",
  "icon": "icon.png",
  "sources": "{'type': 'git', 'location': {...}}",
  "executionfile": "{'type': 'lua', 'location': 'main.lua'}"
}
```

## Browser Compatibility

- Modern browsers (Chrome, Firefox, Safari, Edge)
- ES6+ JavaScript features
- CSS Grid and Flexbox
- Fetch API for AJAX requests

## License

Part of the Lilka project.
